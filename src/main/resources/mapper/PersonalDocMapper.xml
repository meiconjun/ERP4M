<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.meiconjun.erp4m.dao.PersonalDocDao">
    <select id="selectPersonalDocInfo" parameterType="java.util.HashMap" resultType="org.meiconjun.erp4m.bean.DocBean">
        select a.*, b.review_state, b.review_user, b.review_detail, b.judge_user, b.judge_reason, b.judge_time
        , c.file_path from doc_personal_doc_tb a, doc_review_tb b, doc_version_tb c
        where a.doc_serial_no = b.doc_serial_no and a.doc_serial_no = c.doc_serial_no and a.doc_version = c.doc_version
        <if test="doc_no != '' and doc_no != null">
            and a.doc_no like concat('%', #{doc_no}, '%')
        </if>
        <if test="doc_name != '' and doc_name != null">
            and a.doc_name like concat('%', #{doc_name}, '%')
        </if>
        <if test="upload_user != '' and upload_user != null">
            and a.upload_user like concat('%', #{upload_user}, '%')
        </if>
        <if test="doc_type != '' and doc_type != null">
            and a.doc_type = #{doc_type}
        </if>
    </select>
</mapper>